let child_process = require('child_process');
let package_json = require('./package');
let log = console.log;

let version = package_json.version;
log(`Updating pom.xml version to latest version in package.json: ${version}`);
let setVersionProcess = child_process.spawn('mvn', ['versions:set', '-DnewVersion=' + version]);
setVersionProcess.on('close', () => {
    log(`Cleaning up autogenerated file: 'pom.xml.versionsBackup'`);
    child_process.spawn('mvn', ['versions:commit']);
});
